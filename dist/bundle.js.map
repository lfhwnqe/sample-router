{"version":3,"file":"bundle.js","sources":["../src/routes/router.js"],"sourcesContent":["class Router {\n  constructor(opt) {\n    const { pathArr, redirect } = opt;\n    this.redirect = redirect;\n    this.pathArr = pathArr;\n    this.hashHistory = [];\n    this.init();\n  }\n\n  setOpts() {\n    if (!this.redirect) {\n      this.redirect = '/404';\n    }\n  }\n\n  init() {\n    this.setOpts();\n    this.bindEvent();\n  }\n\n  bindEvent() {\n    window.addEventListener('hashchange', (e) => {\n      const url = spliceHash(e.newURL);\n      if (!hasIndex(this.pathArr, url)) {\n        if (this.redirect) {\n          this.push(this.redirect);\n        } else {\n          console.log('has no such path');\n        }\n      }\n      this.hashHistory.push(url);\n    });\n  }\n\n  // 跳转到路由\n  push(url) {\n    window.location.hash = url;\n  }\n\n  goBack() {\n    window.history.back();\n  }\n}\n\n\nfunction spliceHash(url) {\n  const hashIndex = url.indexOf('#');\n  const str = url.substr(hashIndex + 1);\n  console.log('str==>>', str);\n  return str;\n}\n\nfunction hasIndex(arr, index) {\n  if (!Array.isArray(arr)) return;\n  return arr.indexOf(index) >= 0;\n}\n\n\nmodule.exports = Router;"],"names":["Router","opt","pathArr","redirect","hashHistory","init","this","setOpts","bindEvent","addEventListener","e","url","spliceHash","newURL","hasIndex","_this","push","log","location","hash","history","back","hashIndex","indexOf","str","substr","arr","index","Array","isArray","module","exports"],"mappings":"4XAAMA,6BACQC,8BACFC,EAAsBD,EAAtBC,QAASC,EAAaF,EAAbE,cACZA,SAAWA,OACXD,QAAUA,OACVE,YAAc,QACdC,6DAIAC,KAAKH,gBACHA,SAAW,4CAKbI,eACAC,kEAIEC,iBAAiB,aAAc,SAACC,OAC/BC,EAAMC,WAAWF,EAAEG,QACpBC,SAASC,EAAKb,QAASS,KACtBI,EAAKZ,WACFa,KAAKD,EAAKZ,kBAEPc,IAAI,uBAGXb,YAAYY,KAAKL,kCAKrBA,UACIO,SAASC,KAAOR,0CAIhBS,QAAQC,gBAKnB,SAAST,WAAWD,OACZW,EAAYX,EAAIY,QAAQ,KACxBC,EAAMb,EAAIc,OAAOH,EAAY,kBAC3BL,IAAI,UAAWO,GAChBA,EAGT,SAASV,SAASY,EAAKC,MAChBC,MAAMC,QAAQH,UACU,GAAtBA,EAAIH,QAAQI,GAIrBG,OAAOC,QAAU/B"}