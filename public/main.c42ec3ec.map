{"version":3,"sources":["src/routes/router.js","src/main.js"],"names":["Router","opt","pathArr","redirect","hashHistory","init","setOpts","bindEvent","window","addEventListener","e","url","spliceHash","newURL","hasIndex","push","console","log","location","hash","history","back","hashIndex","indexOf","str","substr","arr","index","Array","isArray","module","exports","router"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAMA;AACJ,kBAAYC,GAAZ,EAAiB;AAAA;;AAAA,QACPC,OADO,GACeD,GADf,CACPC,OADO;AAAA,QACEC,QADF,GACeF,GADf,CACEE,QADF;;AAEf,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKD,OAAL,GAAeA,OAAf;AACA,SAAKE,WAAL,GAAmB,EAAnB;AACA,SAAKC,IAAL;AACD;;;;8BAES;AACR,UAAI,CAAC,KAAKF,QAAV,EAAoB;AAClB,aAAKA,QAAL,GAAgB,MAAhB;AACD;AACF;;;2BAEM;AACL,WAAKG,OAAL;AACA,WAAKC,SAAL;AACD;;;gCAEW;AAAA;;AACVC,aAAOC,gBAAP,CAAwB,YAAxB,EAAsC,UAACC,CAAD,EAAO;AAC3C,YAAMC,MAAMC,WAAWF,EAAEG,MAAb,CAAZ;AACA,YAAI,CAACC,SAAS,MAAKZ,OAAd,EAAuBS,GAAvB,CAAL,EAAkC;AAChC,cAAI,MAAKR,QAAT,EAAmB;AACjB,kBAAKY,IAAL,CAAU,MAAKZ,QAAf;AACD,WAFD,MAEO;AACLa,oBAAQC,GAAR,CAAY,kBAAZ;AACD;AACF;AACD,cAAKb,WAAL,CAAiBW,IAAjB,CAAsBJ,GAAtB;AACD,OAVD;AAWD;;AAED;;;;yBACKA,KAAK;AACRH,aAAOU,QAAP,CAAgBC,IAAhB,GAAuBR,GAAvB;AACD;;;6BAEQ;AACPH,aAAOY,OAAP,CAAeC,IAAf;AACD;;;;;;AAIH,SAAST,UAAT,CAAoBD,GAApB,EAAyB;AACvB,MAAMW,YAAYX,IAAIY,OAAJ,CAAY,GAAZ,CAAlB;AACA,MAAMC,MAAMb,IAAIc,MAAJ,CAAWH,YAAY,CAAvB,CAAZ;AACAN,UAAQC,GAAR,CAAY,SAAZ,EAAuBO,GAAvB;AACA,SAAOA,GAAP;AACD;;AAED,SAASV,QAAT,CAAkBY,GAAlB,EAAuBC,KAAvB,EAA8B;AAC5B,MAAI,CAACC,MAAMC,OAAN,CAAcH,GAAd,CAAL,EAAyB;AACzB,SAAOA,IAAIH,OAAJ,CAAYI,KAAZ,KAAsB,CAA7B;AACD;;AAGDG,OAAOC,OAAP,GAAiB/B,MAAjB;;;;AC1DA;;;;;;AAEA,IAAIgC,SAAS,IAAIhC,gBAAJ,CAAW,EAAEE,SAAS,CAAC,GAAD,EAAM,QAAN,CAAX,EAAX,CAAb","file":"main.c42ec3ec.map","sourceRoot":"..","sourcesContent":["class Router {\n  constructor(opt) {\n    const { pathArr, redirect } = opt;\n    this.redirect = redirect;\n    this.pathArr = pathArr;\n    this.hashHistory = [];\n    this.init();\n  }\n\n  setOpts() {\n    if (!this.redirect) {\n      this.redirect = '/404';\n    }\n  }\n\n  init() {\n    this.setOpts();\n    this.bindEvent();\n  }\n\n  bindEvent() {\n    window.addEventListener('hashchange', (e) => {\n      const url = spliceHash(e.newURL);\n      if (!hasIndex(this.pathArr, url)) {\n        if (this.redirect) {\n          this.push(this.redirect);\n        } else {\n          console.log('has no such path');\n        }\n      }\n      this.hashHistory.push(url);\n    });\n  }\n\n  // 跳转到路由\n  push(url) {\n    window.location.hash = url;\n  }\n\n  goBack() {\n    window.history.back();\n  }\n}\n\n\nfunction spliceHash(url) {\n  const hashIndex = url.indexOf('#');\n  const str = url.substr(hashIndex + 1);\n  console.log('str==>>', str);\n  return str;\n}\n\nfunction hasIndex(arr, index) {\n  if (!Array.isArray(arr)) return;\n  return arr.indexOf(index) >= 0;\n}\n\n\nmodule.exports = Router;","import Router from './routes/router';\n\nvar router = new Router({ pathArr: ['/', '/hello'] });"]}